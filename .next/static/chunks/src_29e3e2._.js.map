{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\nexport const prisma = new PrismaClient()"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,SAAS,IAAI,yJAAA,CAAA,eAAY"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/types/index.js"],"sourcesContent":["import {z} from 'zod'\r\n\r\nexport const TaskSchema = z.object({\r\n    \"title\": z.string(),\r\n    \"description\": z.string()\r\n})"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/B,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,eAAe,uIAAA,CAAA,IAAC,CAAC,MAAM;AAC3B"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/middlewares/validateRequest.js"],"sourcesContent":["import { TaskSchema } from \"@/types\";\r\n\r\n\r\nexport class validateRequest{\r\n    static async validateTaskRequest(request){\r\n        try {\r\n            const body = await request.json().catch(() => null);\r\n            if (!body) {\r\n            return NextResponse.json(\r\n                { error: \"Cuerpo de la solicitud invÃ¡lido\" },\r\n                { status: 400 }\r\n            )\r\n            }\r\n            const response = await TaskSchema.safeParse(body)\r\n            if(response.success){\r\n                return  null\r\n            }\r\n        } catch (error) {\r\n            return NextResponse.json(\r\n                { error: \"Datos ingresados no validos\" },\r\n                { status: 400 }\r\n              )\r\n        }\r\n    }\r\n}"],"names":[],"mappings":";;;AAAA;;AAGO,MAAM;IACT,aAAa,oBAAoB,OAAO,EAAC;QACrC,IAAI;YACA,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM;YAC9C,IAAI,CAAC,MAAM;gBACX,OAAO,aAAa,IAAI,CACpB;oBAAE,OAAO;gBAAkC,GAC3C;oBAAE,QAAQ;gBAAI;YAElB;YACA,MAAM,WAAW,MAAM,wHAAA,CAAA,aAAU,CAAC,SAAS,CAAC;YAC5C,IAAG,SAAS,OAAO,EAAC;gBAChB,OAAQ;YACZ;QACJ,EAAE,OAAO,OAAO;YACZ,OAAO,aAAa,IAAI,CACpB;gBAAE,OAAO;YAA8B,GACvC;gBAAE,QAAQ;YAAI;QAEtB;IACJ;AACJ"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/app/api/task/route.js"],"sourcesContent":["import {prisma} from '@/lib/prisma'\r\nimport { validateRequest } from '@/middlewares/validateRequest'\r\nimport { NextResponse } from \"next/server\"\r\n\r\nexport async function GET(){\r\n    try {\r\n        const task = await prisma.task.findMany()\r\n        return NextResponse.json(task)\r\n    } catch (error) {\r\n        console.log(error.message)\r\n    }\r\n}\r\nexport async function POST(request){\r\n    try {\r\n        const {title, description} = await request.json()\r\n        const newTask = await prisma.task.create({\r\n            data: {\r\n                title,\r\n                description\r\n            }\r\n        })\r\n        return NextResponse.json(newTask)\r\n    } catch (error) {\r\n        return NextResponse.json({error: error.message},{status: 500})\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,OAAO,MAAM,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,QAAQ;QACvC,OAAO,iIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC,MAAM,OAAO;IAC7B;AACJ;KAPsB;AAQf,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,EAAC,KAAK,EAAE,WAAW,EAAC,GAAG,MAAM,QAAQ,IAAI;QAC/C,MAAM,UAAU,MAAM,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACrC,MAAM;gBACF;gBACA;YACJ;QACJ;QACA,OAAO,iIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,iIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAC,OAAO,MAAM,OAAO;QAAA,GAAE;YAAC,QAAQ;QAAG;IAChE;AACJ;MAbsB"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/services/tasks.js"],"sourcesContent":["import { POST } from \"@/app/api/task/route\"\r\n\r\n\r\n\r\nexport async function createTask({title, description}){\r\n    try {\r\n        const res = await fetch('/api/task', {\r\n            method: 'POST',\r\n            body: JSON.stringify({title, description}),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        const data = await res.json()\r\n        return data\r\n    } catch (error) {\r\n        console.log({error: error.message})\r\n    }\r\n}\r\n\r\nexport async function getTasks(){\r\n    try {\r\n        const res = await fetch('http://localhost:3000/api/task')\r\n        const tasks = await res.json()\r\n        return tasks\r\n    } catch (error) {\r\n        throw new Error(error.message)\r\n    }\r\n}\r\n\r\nexport async function getTaskById(id){\r\n    try {\r\n        const res = await fetch(`/api/task/${id}`)\r\n        const task = await res.json()\r\n        return task\r\n    } catch (error) {\r\n        throw new Error(error.message)\r\n    }\r\n}\r\nexport async function editTaskById({title, description}, id){\r\n    try {\r\n        const res = await fetch(`/api/task/${id}`, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({title, description}),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        const data = await res.json()\r\n        return data\r\n    } catch (error) {\r\n        throw new Error(error.message)\r\n    }\r\n}\r\n\r\nexport async function deleteTaskById(id){\r\n    try {\r\n        const res = await fetch(`/api/task/${id}`,{\r\n            method: 'DELETE'\r\n        }\r\n        )\r\n        const data = res.json()\r\n        return data\r\n    } catch (error) {\r\n        throw new Error(error.message)\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;AAAA;;AAIO,eAAe,WAAW,EAAC,KAAK,EAAE,WAAW,EAAC;IACjD,IAAI;QACA,MAAM,MAAM,MAAM,MAAM,aAAa;YACjC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAC;gBAAO;YAAW;YACxC,SAAS;gBACL,gBAAgB;YACpB;QACJ;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC;YAAC,OAAO,MAAM,OAAO;QAAA;IACrC;AACJ;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,MAAM,MAAM,MAAM;QACxB,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,MAAM,IAAI,MAAM,MAAM,OAAO;IACjC;AACJ;AAEO,eAAe,YAAY,EAAE;IAChC,IAAI;QACA,MAAM,MAAM,MAAM,MAAM,CAAC,UAAU,EAAE,IAAI;QACzC,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,MAAM,IAAI,MAAM,MAAM,OAAO;IACjC;AACJ;AACO,eAAe,aAAa,EAAC,KAAK,EAAE,WAAW,EAAC,EAAE,EAAE;IACvD,IAAI;QACA,MAAM,MAAM,MAAM,MAAM,CAAC,UAAU,EAAE,IAAI,EAAE;YACvC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAC;gBAAO;YAAW;YACxC,SAAS;gBACL,gBAAgB;YACpB;QACJ;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,MAAM,IAAI,MAAM,MAAM,OAAO;IACjC;AACJ;AAEO,eAAe,eAAe,EAAE;IACnC,IAAI;QACA,MAAM,MAAM,MAAM,MAAM,CAAC,UAAU,EAAE,IAAI,EAAC;YACtC,QAAQ;QACZ;QAEA,MAAM,OAAO,IAAI,IAAI;QACrB,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,MAAM,IAAI,MAAM,MAAM,OAAO;IACjC;AACJ"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/juan.lizarraga/Documents/projects/nextjs/NextJS---CRUD/src/app/new-task/page.jsx"],"sourcesContent":["\"use client\"\r\nimport { useEffect, useState } from 'react'\r\nimport { createTask, editTaskById, getTaskById } from '@/services/tasks'\r\nimport { toast } from 'react-toastify'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useParams } from 'next/navigation'\r\n\r\nexport default  function NewTask() {\r\n\r\n  \r\n  const defaultValues = {\r\n      title: '',\r\n      description: ''\r\n  }\r\n  const router = useRouter()\r\n  const [values, setValues] = useState(defaultValues)\r\n\r\n  const params = useParams()\r\n  const id = params.id\r\n    useEffect(() => {\r\n      if(id){\r\n        getTaskById(id).then(task => {\r\n          setValues({\r\n            title: task.title,\r\n            description: task.description\r\n          })\r\n        })\r\n       \r\n      }\r\n    }, [])\r\n  const handleChange = (e) => {\r\n    const {id, value} = e.target\r\n    setValues(values => ({\r\n      ...values,\r\n      [id]: value\r\n    }))\r\n  }\r\n  \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    if(!id){\r\n      const data =  await createTask(values)\r\n      toast.success('Cliente registrado de exitosamente')\r\n    }else{\r\n      const data = await editTaskById(values, id)\r\n      toast.success('Datos del cliente actualizados')\r\n    }\r\n      router.refresh()\r\n      router.push('/')\r\n      setValues(defaultValues)\r\n    \r\n  }\r\n  return (\r\n    <>\r\n      <div className=' container mx-auto w-1/3 mt-15 '>\r\n        <h1 className=' text-3xl text-center font-bold mb-10'>Registro de tareas</h1>\r\n          <form \r\n            className=' bg-white h-2/3 flex flex-col items-center space-y-10 p-10 rounded-xl shadow-xl'\r\n            \r\n            onSubmit={handleSubmit}>\r\n            <h1 className=' text-center text-2xl font-bold'>LLene el siguiente formulario para registrar una nueva tarea</h1>\r\n              <label htmlFor=\"title\"\r\n                className=' m-1 self-start font-bold text-md'\r\n              >Titulo de la tarea</label>\r\n              <input \r\n                  type=\"text\"\r\n                  id='title'\r\n                  placeholder='Titulo'\r\n                  value={values.title}\r\n                  onChange={handleChange}\r\n                  className=' bg-slate-100 border border-slate-500 w-full rounded-sm p-2 text-black'\r\n              />\r\n              <label htmlFor=\"description\"\r\n                className=' m-1 self-start font-bold text-md'\r\n              >Descripcion o datos del cliente del cliente</label>\r\n              <textarea\r\n                 name=\"\" id=\"description\" rows=\"3\"\r\n                 className='  bg-slate-100 border border-slate-500 w-full rounded-sm p-2'\r\n                 placeholder='Descripcion'   \r\n                 value={values.description}\r\n                 onChange={handleChange}\r\n              ></textarea>\r\n              <button \r\n                type='submit'\r\n                className=' bg-sky-500 border hover:bg-sky-600 cursor-pointer border-slate-500 w-full p rounded-lg text-white font-bold text-xl p-2'\r\n              >{id? 'Editar Tarea': 'Crear Tarea'}</button>\r\n          </form>\r\n          <button\r\n            onClick={() => {router.push('/')}}\r\n            className=' bg-slate-400 mt-5 p-2 rounded-lg hover:bg-slate-500 cursor-pointer font-bold text-sm'\r\n          >Regresar  a Inicio</button>\r\n      </div>\r\n        \r\n    </>\r\n    \r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;;AAOgB,SAAS;;IAGvB,MAAM,gBAAgB;QAClB,OAAO;QACP,aAAa;IACjB;IACA,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,KAAK,OAAO,EAAE;IAClB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,IAAG,IAAG;gBACJ,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD,EAAE,IAAI,IAAI;yCAAC,CAAA;wBACnB,UAAU;4BACR,OAAO,KAAK,KAAK;4BACjB,aAAa,KAAK,WAAW;wBAC/B;oBACF;;YAEF;QACF;4BAAG,EAAE;IACP,MAAM,eAAe,CAAC;QACpB,MAAM,EAAC,EAAE,EAAE,KAAK,EAAC,GAAG,EAAE,MAAM;QAC5B,UAAU,CAAA,SAAU,CAAC;gBACnB,GAAG,MAAM;gBACT,CAAC,GAAG,EAAE;YACR,CAAC;IACH;IAGA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAG,CAAC,IAAG;YACL,MAAM,OAAQ,MAAM,CAAA,GAAA,2HAAA,CAAA,aAAU,AAAD,EAAE;YAC/B,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC;QAChB,OAAK;YACH,MAAM,OAAO,MAAM,CAAA,GAAA,2HAAA,CAAA,eAAY,AAAD,EAAE,QAAQ;YACxC,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC;QAChB;QACE,OAAO,OAAO;QACd,OAAO,IAAI,CAAC;QACZ,UAAU;IAEd;IACA,qBACE;kBACE,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACpD,6LAAC;oBACC,WAAU;oBAEV,UAAU;;sCACV,6LAAC;4BAAG,WAAU;sCAAkC;;;;;;sCAC9C,6LAAC;4BAAM,SAAQ;4BACb,WAAU;sCACX;;;;;;sCACD,6LAAC;4BACG,MAAK;4BACL,IAAG;4BACH,aAAY;4BACZ,OAAO,OAAO,KAAK;4BACnB,UAAU;4BACV,WAAU;;;;;;sCAEd,6LAAC;4BAAM,SAAQ;4BACb,WAAU;sCACX;;;;;;sCACD,6LAAC;4BACE,MAAK;4BAAG,IAAG;4BAAc,MAAK;4BAC9B,WAAU;4BACV,aAAY;4BACZ,OAAO,OAAO,WAAW;4BACzB,UAAU;;;;;;sCAEb,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACV,KAAI,iBAAgB;;;;;;;;;;;;8BAE1B,6LAAC;oBACC,SAAS;wBAAO,OAAO,IAAI,CAAC;oBAAI;oBAChC,WAAU;8BACX;;;;;;;;;;;;;AAMX;GA1FyB;;QAOR,qIAAA,CAAA,YAAS;QAGT,qIAAA,CAAA,YAAS;;;KAVD"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}